extern int func printf(str s, ...);

# proc test ((int + boolean) sum)
# define test :: c : Channel<+(int + boolean)> = {
define func test ((int + boolean) sum) : int { #FIXME: PROC
# {

    match sum {
        int i => printf("integer: %u\n", i);
        boolean b => printf("boolean: %s\n", (boolean b) : str {
            if b then {
                return "true";
            }

            return "false"; 
        }(b));
    }

    return -1; 
}


# int func program() 
define program :: c : Channel<-int> = {
    test(5); # FIXME: DOESN'T WORK!!!
    # return 0;

    c.send(0)
}